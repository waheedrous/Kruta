@model HPE.Kruta.Model.Queue


        <div class="container-fluid">
            <div class="row">

                <div class="col-sm-3">
                    <div class="inner custome-inner">
                        <div class="row custom-row-1">
                            <h4>Document Details </h4>
                            <br />
                        </div>
                        <div class="row custom-row-2">
                            @if (Model != null && Model.Document != null)
                            {
                            <text>Recorded Date: @String.Format("{0:MM-dd-yyyy}", Model.Document.RecordedDateTime)<br /></text>
                            }
                    Document Number: @Html.DisplayFor(m => m.Document.DocumentNumber)<br />
                    Document Type: @Html.DisplayFor(m => m.Document.DocumentSubType.DocumentType.Description)<br />
                    <br />
                </div>
            </div>
        </div>


        <div class="col-sm-3">
            <div class="inner custom-inner">
                <div class="row custom-row-1">

                    <h4>Property Details </h4>
                    <br />
                </div>
                <div class="row custom-row-2">
                    Parcel Number: @Html.DisplayFor(m => m.Property.ParcelNumber)<br />
                    Legal Description: @Html.DisplayFor(m => m.Property.FullLegalDescription)<br />
                    <br />
                    Class Code: @Html.DisplayFor(m => m.Property.PropertyClass.Description)<br />
                </div>
            </div>
        </div>

        <div class="col-sm-3">
            <div class="inner custom-inner">
                <div class="row custom-row-1">
                    <h4 style="font-weight: 700 !important;">Notes</h4>
                    </br>
                </div>
                <div class="row custom-row-2">
                    @if (Model != null && Model.QueueNotes != null)
                            {
                                foreach (var note in Model.QueueNotes)
                                {
                            <table>
                                <tr>
                                    <td>@string.Format("{0} {1:MM-dd-yyyy hh:mm}: {2}", note.Employee.EmployeeName, note.CreatedOn, note.Note)</td>



                                </tr>
                            </table>
                                }
                            }
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="inner" style="background-color: #D1D8E9">
                        <div class="dropdown custom-docstatusdropdown">
                            Document Status:
                    
                          @Html.DropDownList("QueueStatuses")

                            @Html.TextArea("Notes")

                           <br />

                           <input value="Save" id="btnSubmit" name="btnSubmit" type="Submit" onclick="SaveQueueStatus()"  class="btn btn-info custom-btn-SR"/>
                         

                       
                       </div>
                        </div>
                        <div class="SR-btn-group">
                           
                            <button id="Route" type="button" class="btn btn-info custom-btn-SR"
                                data-toggle="modal" data-target="#routeModal">
                                Route</button>
                        </div>


            </div>
        </div>
    </div>
</div>

<!-- Modal Start 2 -->
<div class="modal fade" id="routeModal" role="dialog">
    <div class="modal-dialog custom-popupMain">

        <!-- Modal Content Start -->
        <div class="modal-content custom-popupMain-Content">
            <div class="modal-header custom-popupMain-Header">
                <button type="button" class="close custom-popupMain-Close-Btn" data-dismiss="modal">&times;</button>
                <h6 class="modal-title custom-popupMain-Hr">ROUTE DOCUMENT TO</h6>
            </div>
            <div class="modal-body">
                <!-- Form Start -->
                <div class="container">
                    <form>
                        <div class="form-group">
                            <label for="departments">Departments:</label>
                            <select class="form-control form-control-custom" id="departments">
                                <option value="ar" selected="selected">ARCC</option>
                                <option value="ac">A&C</option>
                                <option value="ttc">TTC</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="departmentStaff">Department Staff:</label>
                            <select class="form-control form-control-custom" id="departmentStaff">
                                <option value="tianxuLi" selected="selected">Tianxu Li</option>
                                <option value="mehmetTumer">Mehmet Tumer</option>
                                <option value="harshitaPrakash">Harshita Prakash</option>
                            </select>
                        </div>
                    </form>
                </div>
                <!-- Form End -->
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-warning custom-popupMain-Footer-Btn">Route</button>
            </div>
        </div>
        <!-- Modal Content End -->

    </div>
</div>

<script>
    function SaveQueueStatus()
    {

        var noteVal = $('#Notes').val();
        var statusVal = $('#QueueStatuses').val();
        
        SubmitQueueStatus(@Model.QueueID ,statusVal, noteVal);

    }

    function SubmitQueueStatus(queueIDVal, status, note) {
        $.ajax({
            url: '/QueueDetails/SaveStatus',
            contentType: "application/json; charset=utf-8",
            type: 'GET',
            dataType: 'json',
            data: {queueID : queueIDVal, queueStatusID: status, notes: note },
            success: function (data) {
                if (data.Success) {
                    alert('Status Successfully Changed!')
                    //ShowInformationModal('Notification', 'Status saved successfully.');   
                }
            
            },
            error: function (xhr, ajaxOptions, thrownError) {
                console.log(xhr.responseText);
            }
        });
     
    }
        
 
</script>
